<html lang="en">

<head>
    <title>Exome Gene-level Group-File Generator (Lunaris Version 1.5.26)</title>
    <link rel="stylesheet" href="css/lunaris.css">
    <script src="js/vep.js"></script>
    <script src="codemirror/lib/codemirror.js"></script>
    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <script src="codemirror/mode/javascript/javascript.js"></script>
    <link rel="stylesheet" href="codemirror/theme/liquibyte.css">
</head>

<body onload="init()">
<header>
    <h1>
<img id="lunarisLogo" src="http://kp4cd.org/sites/default/files/lunaris/lunaris_logo_white.svg"
         style="width: 80px" alt="Lunaris logo"/>
        Exome Gene-level Group-File Generator
</h1>
</header>

<p>The Exome Gene-Level Group-File Generator is designed to, based on a user-provided location-sorted list of exome
    variants, annotate variants using the
    <a href="https://www.ensembl.org/info/docs/tools/vep/index.html">Ensembl Variant Effect Predictor (VEP)</a>
    and generate group files to run gene-level association tests using common formats (e.g. EPACTS, RAREMETALS).
    Users can define masks based on annotations, or use one of the
    <a href="https://www.nature.com/articles/s41586-019-1231-2">published masks provided</a>.</p>

<p>
    <span class="stepNumber">1.</span>
    <label for="inputfile">
        As a variant site list to upload on submit, select a location-sorted VCF with at least the first five columns
        (start with a few variants - we are working on performance, for an example input
        VCF file, check
        <a href="predictor/sample_input.vcf" download="sample_input.vcf">here</a>):
    </label>
    <input type="file" id="inputfile" name="myfile">
</p>

<p>
    <span class="stepNumber">2a.</span>
    If preferred, select a predefined variant mask
    <span>
        <button onclick="resetFilters()">Clear mask</button>
        <button onclick="setMask()">Load predefined mask</button>
        <select name="masks" id="masks"></select>
    </span>
</p>
<p>
    <span class="stepNumber">2b.</span>
    If a custom variant group mask is preferred, manually edit text box below.
    Available fields:
    <select name="fields" id="fields"></select>
</p>
<p id="code_mirror_parent"></p>

<p>
    <span class="stepNumber">3.</span>
    Submit variant list to server
    <button onclick="submit()">Submit</button>
</p>

<p>
    <span class="stepNumber">4.</span>
    Wait for results to be calculated. Check for status updates below.
</p>

<p id="status_area"></p>

<p id="submission_area">
    <span id="statusUpdatesPlaceholder">(Submission status updates will appear here)</span>
</p>

<hr>
<p>
    Powered by Lunaris Version 1.5.26. Copyright 2020 Broad Institute
</p>

</body>

</html>